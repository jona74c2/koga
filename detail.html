<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>
    <section id="detail">
        <article class="ret">


            <div class="images_container">
                <img class="imageFront" src="" alt="">
                <div class="grid_container">
                    <div class="bike_img">
                        <img class="imageWhole2" src="" alt="">
                    </div>

                    <div class="bike_img">
                        <img class="imageWhole3" src="" alt="">

                    </div>
                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg1" src="" alt="">

                    </div>
                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg2" src="" alt="">
                    </div>
                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg3" src="" alt="">

                    </div>

                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg4" src="" alt="">

                    </div>

                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg5" src="" alt="">

                    </div>

                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg6" src="" alt="">

                    </div>
                    <div class="bike_img">
                        <h4 class="streamer_name"></h4>
                        <img class="nearImg7" src="" alt="">

                    </div>
                </div>
            </div>

            <h2></h2>

            <p class="info"></p>

        </article>
    </section>

</body>

</html>

<script>
    document.addEventListener("DOMContentLoaded", getJson);
    document.querySelector(".imageFront").addEventListener("click", switchImg);

    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");

    let retter = [];
    let imagePage = [];
    let imgCounter = 0;

    async function getJson() {

        const url = `http://beansprout.dk/kea/2.semester/tema9/Koga/wordpress/wp-json/wp/v2/cykel/${id}`;
        let myJson = await fetch(url);
        retter = await myJson.json();

        visIndhold();
        console.log(retter);
    }

    function visIndhold() {

        document.querySelector(".imageFront").src = `${retter.billede_hele_cyklen_1.guid}`;
        document.querySelector(".imageWhole2").src = `${retter.billede_hele_cyklen_2.guid}`;
        document.querySelector(".imageWhole3").src = `${retter.billede_hele_cyklen_3.guid}`;

        /*let i;
        for (i = 0; i < 8; i++) {
            console.log(retter.
                "naerbillede" + i.guid);
            console.log(`${retter.naerbillede+i.guid}`);
            console.log(".nearImg" + (i + 1));
            if (retter.naerbillede + i.guid) {
                document.querySelector(".nearImg" + (i + 1)).src = `${retter.naerbillede+i.guid}`;
            }*/

        if (retter.naerbillede1.guid) {
            document.querySelector(".nearImg1").src = `${retter.naerbillede1.guid}`;
        }
        if (retter.naerbillede2.guid) {
            document.querySelector(".nearImg2").src = `${retter.naerbillede2.guid}`;
        }
        if (retter.naerbillede3.guid) {
            document.querySelector(".nearImg3").src = `${retter.naerbillede3.guid}`;
        }
        if (retter.naerbillede4.guid) {
            document.querySelector(".nearImg4").src = `${retter.naerbillede4.guid}`;
        }
        if (retter.naerbillede5.guid) {
            document.querySelector(".nearImg5").src = `${retter.naerbillede5.guid}`;
        }
        if (retter.naerbillede6.guid) {
            document.querySelector(".nearImg6").src = `${retter.naerbillede6.guid}`;
        }
        if (retter.naerbillede7.guid) {
            document.querySelector(".nearImg7").src = `${retter.naerbillede7.guid}`;
        }



        document.querySelector("#detail h2").textContent = retter.title.rendered;
        document.querySelector("#detail p").innerHTML = retter.kort_beskrivelse;

    }

    function switchImg() {
        imgCounter++;
        console.log(imgCounter);

        if (imgCounter == 1 && retter.naerbillede2.guid) {
            document.querySelector(".imageFront").src = `${retter.billede_hele_cyklen_2.guid}`;
        } else if (imgCounter == 2 && retter.naerbillede3.guid) {
            document.querySelector(".imageFront").src = `${retter.billede_hele_cyklen_3.guid}`;
        } else if (imgCounter == 3 && retter.naerbillede1.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede1.guid}`;
        } else if (imgCounter == 4 && retter.naerbillede2.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede2.guid}`;
        } else if (imgCounter == 5 && retter.naerbillede3.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede3.guid}`;
        } else if (imgCounter == 6 && retter.naerbillede4.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede4.guid}`;
        } else if (imgCounter == 7 && retter.naerbillede5.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede5.guid}`;
        } else if (imgCounter == 8 && retter.naerbillede6.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede6.guid}`;
        } else if (imgCounter == 9 && retter.naerbillede7.guid) {
            document.querySelector(".imageFront").src = `${retter.naerbillede7.guid}`;
        } else {
            imgCounter = 0;
            document.querySelector(".imageFront").src = `${retter.billede_hele_cyklen_1.guid}`;
        }


    }

</script>
