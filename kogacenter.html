<!DOCTYPE html>
<html lang="">

<head>
    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans&display=swap" rel="stylesheet">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

    <nav class="main_menu">

    </nav>
    <section id="detail">
        <article class="ret">
            <div id="swipeimages_container">
                <div class="swipeimg_container">
                    <h4 class="headline_swipe"></h4>
                    <img class="swipe_img" id="swipe_img1">
                </div>

                <div class="swipeimg_container hide">
                    <h4 class="headline_swipe"></h4>
                    <img class="swipe_img" id="swipe_img2">
                </div>

                <div class="swipeimg_container hide">
                    <h4 class="headline_swipe"></h4>
                    <img class="swipe_img" id="swipe_img1">
                </div>

                <div class="swipeimg_container hide">
                    <h4 class="headline_swipe"></h4>
                    <img class="swipe_img" id="swipe_img1">
                </div>

                <div class="swipeimg_container hide">
                    <h4 class="headline_swipe"></h4>
                    <img class="swipe_img" id="swipe_img1">
                </div>


            </div>
            <div id="dot_container">
                <img class="dot" id="dot1" src="img/dot.svg" alt="">
                <img class="dot" id="dot2" src="img/dot.svg" alt="">
                <img class="dot" id="dot3" src="img/dot.svg" alt="">
                <img class="dot" id="dot4" src="img/dot.svg" alt="">
                <img class="dot" id="dot5" src="img/dot.svg" alt="">
            </div>
        </article>
    </section>

</body>

</html>

<script>
    document.addEventListener("DOMContentLoaded", start);

    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");

    let retter = [];
    let content = [];
    let contentArray = [];
    let imgCounter = 0;

    function start() {
        getJson();
        setDots();
        setBlueDot(imgCounter);
    }

    async function getJson() {
        getMenu();
        const url = "http://beansprout.dk/kea/2.semester/tema9/Koga/wordpress/wp-json/wp/v2/forsiden";
        let myJson = await fetch(url);
        retter = await myJson.json();

        visIndhold();
    }

    async function getMenu() {
        const thisNav = await fetch("mainnavigation.html");
        let fetchedNav = await thisNav.text();
        document.querySelector(".main_menu").innerHTML = fetchedNav;
    }

    function visIndhold() {
        console.log(retter);
        console.log(retter[0].slider_billede1.guid);
        document.querySelectorAll(".swipe_img").forEach((img, i) => {
            img.src = retter[0]["slider_billede" + (i + 1)].guid;
            img.alt = retter[0]["slider_billede" + (i + 1)].post_title;
        })

        document.querySelectorAll(".headline_swipe").forEach((headline, i) => {
            headline.textContent = retter[0]["slider_billede" + (i + 1)].post_title;
        })

           /* document.querySelectorAll(".figure").forEach((figure, i) => {
                figure.innerHTML = contentArray[i];
            })*/

        }

        function setBlueDot(blue) {
            document.querySelectorAll(".dot").forEach((dot, i) => {
                dot.src = "img/dot.svg";
                if (blue == i) {
                    dot.src = "img/bluedot.svg";
                }
            })
        }

        function setDots() {
            document.querySelectorAll(".dot").forEach((dot, i) => {
                dot.addEventListener("click", dotSwitch);
            })

        }

        function dotSwitch() {
            imgCounter = this.id.substring(3, this.id.length) - 1;
            switchImg();
        }

        function switchImg() {

            document.querySelectorAll(".swipeimg_container").forEach((img, i) => {
                img.classList = "swipeimg_container hide";
                if (imgCounter == i) {
                    img.classList = "swipeimg_container";
                }
            })

            setBlueDot(imgCounter);
        }

</script>
